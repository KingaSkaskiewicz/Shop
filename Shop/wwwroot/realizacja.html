<div class="container">
    <div class="row">
        <div class="col-sm-8">
            <h4>DANE DO WYSYŁKI</h4>
            <form name="daneDoWysylkiForm" ng-submit="daneDoWysylkiForm.wasValidated = true;" ng-class="{'was-validated': daneDoWysylkiForm.wasValidated }" novalidate>
                <div class="form-group">
                    <label for="name_surname"><b>Imię i Nazwisko</b></label>
                    <input class="form-control" ng-class="{'is-invalid': daneDoWysylkiForm.name_surname.$invalid && daneDoWysylkiForm.name_surname.$touched, 'is-valid' : daneDoWysylkiForm.name_surname.$valid && daneDoWysylkiForm.name_surname.$touched}" id="name_surname" name="name_surname" ng-model="user.name_surname" autofocus required pattern="[A-z]+[ ][A-z]+">
                    <div ng-show="daneDoWysylkiForm.name_surname.$valid" class="valid-feedback"></div>
                    <div ng-show="daneDoWysylkiForm.name_surname.$error.required" class="invalid-feedback">Proszę wypełnić to pole.</div>
                    <div ng-show="daneDoWysylkiForm.name_surname.$error.pattern" class="invalid-feedback">Niewłaściwy format, proszę wpisać imię spacja nazwisko.</div>
                </div>
                <div class="form-group">
                    <label for="adres"><b>Adres</b></label>
                    <input class="form-control" id="address" name="address" ng-model="user.address" ng-class="{'is-invalid': (daneDoWysylkiForm.address.$invalid && daneDoWysylkiForm.address.$touched), 'is-valid' : (daneDoWysylkiForm.address.$valid && daneDoWysylkiForm.address.$touched) }" required minlength="4">
                    <div ng-show="daneDoWysylkiForm.address.$valid" class="valid-feedback"></div>
                    <div ng-show="daneDoWysylkiForm.address.$error.required" class="invalid-feedback">Proszę wypełnić to pole.</div>
                    <div ng-show="daneDoWysylkiForm.address.$error.minlength" class="invalid-feedback">Adres jest za krótki.</div>
                </div>
                <div class="form-row mt-3">
                    <div class="col-6">
                        <label for="zip_code"><b>Kod pocztowy</b></label>
                        <input class="form-control form-inline" id="zip_code" name="zip_code" ng-model="user.zip_code" ng-class="{'is-invalid': (daneDoWysylkiForm.zip_code.$invalid && daneDoWysylkiForm.zip_code.$touched), 'is-valid' : (daneDoWysylkiForm.zip_code.$valid && daneDoWysylkiForm.zip_code.$touched) }" required pattern="[0-9]{2}-[0-9]{3}">
                        <div ng-show="daneDoWysylkiForm.zip_code.$valid" class="valid-feedback"></div>
                        <div ng-show="daneDoWysylkiForm.zip_code.$error.required" class="invalid-feedback">Proszę wypełnić to pole.</div>
                        <div ng-show="daneDoWysylkiForm.zip_code.$error.pattern" class="invalid-feedback">Niewłaściwy format, wzór XX-XXX.</div>
                    </div>
                    <div class="col-6">
                        <label for="city"><b>Miasto</b></label>
                        <input class="form-control form-inline" id="city" name="city" ng-model="user.city" ng-class="{'is-invalid': (daneDoWysylkiForm.city.$invalid && daneDoWysylkiForm.city.$touched), 'is-valid' : (daneDoWysylkiForm.city.$valid && daneDoWysylkiForm.city.$touched) }" required pattern="[A-z]{2,}">
                        <div ng-show="daneDoWysylkiForm.city.$valid" class="valid-feedback"></div>
                        <div ng-show="daneDoWysylkiForm.city.$error.required" class="invalid-feedback">Proszę wypełnić to pole.</div>
                        <div ng-show="daneDoWysylkiForm.city.$error.pattern" class="invalid-feedback">Nazwa miasta jest za krótka.</div>
                    </div>
                </div>
                <div class="form-row mt-3">
                    <div class="col-6">
                        <label for="email"><b>Email</b></label>
                        <input type="email" class="form-control form-inline" id="email" name="email" ng-model="user.email" ng-class="{'is-invalid': (daneDoWysylkiForm.email.$invalid && daneDoWysylkiForm.email.$touched), 'is-valid' : (daneDoWysylkiForm.email.$valid && daneDoWysylkiForm.email.$touched) }" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$">
                        <div ng-show="daneDoWysylkiForm.email.$valid" class="valid-feedback"></div>
                        <div ng-show="daneDoWysylkiForm.email.$error.required" class="invalid-feedback">Proszę wypełnić to pole.</div>
                        <div ng-show="daneDoWysylkiForm.email.$error.pattern" class="invalid-feedback">Niepoprawny adres email.</div>
                    </div>
                    <div class="col-6">
                        <label for="phone"><b>Telefon</b></label>
                        <input class="form-control form-inline" id="phone" name="phone" ng-model="user.phone" ng-class="{'is-invalid': (daneDoWysylkiForm.phone.$invalid && daneDoWysylkiForm.phone.$touched), 'is-valid' : (daneDoWysylkiForm.phone.$valid && daneDoWysylkiForm.phone.$touched) }" required pattern="[0-9]{9,}">
                        <div ng-show="daneDoWysylkiForm.phone.$valid" class="valid-feedback"></div>
                        <div ng-show="daneDoWysylkiForm.phone.$error.required" class="invalid-feedback">Proszę wypełnić to pole.</div>
                        <div ng-show="daneDoWysylkiForm.phone.$error.pattern" class="invalid-feedback">Niepoprawny telefon.</div>
                    </div>
                </div>
                <br />
                <h4>OPCJE WYSYŁKI</h4>
                <div class="mt-4" ng-repeat="delivery in shoppingBasketService.deliveryMethods">
                    <label class="container-radio">
                        <h6 ng-bind="delivery.name + '   ' + delivery.value + ' zł'"></h6>
                        <input type="radio" name="radio" ng-model="shoppingBasketService.selectedDeliveryMethod" ng-value="delivery">
                        <span class="checkmark"></span>
                    </label>
                </div>
                <button type="submit" class="btn btn-lg btn-secondary m-3">ZATWIERDŹ</button>
            </form>
        </div>
        <div class="col-sm-4">
            <h4>PODSUMOWANIE</h4>
            <div class="text-center m-3" ng-show="shoppingBasketService.ifBasketIsEmpty()">
                <h4>TWÓJ KOSZYK JEST PUSTY</h4>
                <h2><i class='far fa-sad-tear'></i></h2>
            </div>
            <table class="table table-bordered table-hover" ng-hide="shoppingBasketService.ifBasketIsEmpty()">
                <thead>
                    <tr class="text-center thead-light">
                        <th>ILOŚĆ</th>
                        <th>OPIS</th>
                        <th>SUMA</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="basketItem in shoppingBasketService.basketItems" class="text-center">
                        <td ng-bind="basketItem.quantity"></td>
                        <td ng-bind="basketItem.description"></td>
                        <td ng-bind="(basketItem.price * basketItem.quantity).toFixed(2) + ' zł'"></td>
                    </tr>

                    <tr class="text-center" ng-show="shoppingBasketService.selectedDeliveryMethod !== null">
                        <td>1</td>
                        <td ng-bind="shoppingBasketService.selectedDeliveryMethod.name"></td>
                        <td ng-bind="shoppingBasketService.selectedDeliveryMethod.value + ' zł'"></td>
                    </tr>

                    <tr class="text-center font-weight-bold text-success" ng-show="shoppingBasketService.appliedDiscounts.length > 0">
                        <td>1</td>
                        <td ng-bind="shoppingBasketService.appliedDiscounts[0].name"></td>
                        <td ng-bind="'-' + shoppingBasketService.getDiscountValue() + ' zł'"></td>
                    </tr>

                    <tr class="text-center font-weight-bold">
                        <td></td>
                        <td>ŁĄCZNIE</td>
                        <td><strong ng-bind="shoppingBasketService.getTotalPrice() + ' zł'"></strong></td>
                    </tr>
                </tbody>

            </table>

        </div>
        </div>
    </div>



